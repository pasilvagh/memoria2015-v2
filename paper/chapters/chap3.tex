\chapter{Marco Teórico - (In) Seguridad en el Browser}
\label{chap3:FC}

En esta sección se presentan los posibles ataques que un Browser puede sufrir y que directamente podrían afectar al sistema con el que se comunica. Principalmente ahondaremos en los ataques en el Browser relacionados a las técnicas de Ingeniería Social \cite{socEngineeering}. El escenario actual de los ataques en el browser ha cambiado bastante, si es comparado a aquellos de la decada de los noventa. Cada día los Browsers son más robustos y difíciles de explotar, y por lo mismo los ataques de tipo \textit{drive-by downloads} o los basados en ejecución de código para vulnerar el sistema, cada vez son menores. Una nueva forma de ataque ha emergido y es bastante fácil de lograrlo, pues se basa en el engaño del usuario a realizar lo que el atacante desea. Una vez el usuario es engañado, el atacante puede lograr un control total tanto del Browser o del Host, sin haber tenido que vulnerar el sistema \cite{Rajab2013} que aloja al Browser. Desarrollos de sistemas críticos que interactuan a diario con diferentes usuarios en la red, deberían de ser los más preocupados de estos ataques pues atentan contra la confidencialidad, integridad y disponibilidad de los datos, tanto del usuario (personales) como los de los \textit{Stakeholders} involucrados.

\section{Social Engineering}
\cite{socEngineeering} define este tipo de acción como: El acto de manipular una persona para realizar acciones que no son parte de los mejores intereses del \textit{blanco o víctima} (la misma persona/organización/etc u otra entidad). Un ataque de éste tipo puede darse de diversas maneras, no dejando la posibilidad de un encuentro físico o digital con el que realiza el engaño. Un ataque basado en ingeniería social, es uno que se aprovecha del comportamiento humano y la confianza de la víctima. En el contexto del Web Browser, el usuario engañado es la primera y última línea de defensa contra este tipo de ataques, pues un abuso en la confianza del usuario podría abrir las puertas al Host del Browser, logrando un daño tanto del usuario como con los sistemas externos con los que interactúa.

\section{Ataques y Amenazas}
Esta sección incluye algunos ataques posibles de realizar en un Browser y que podrían afectar tanto directa como indirectamente a un sistema externo. Acá no incluiremos ataques en donde el Host ya ha sido vulnerado con anticipación, o aquellos que puedan correr software con los privilegios de un usuario del sistema Host, es decir, aquellos donde el Host ya ha sido controlado directamente por medio de alguna vulnerabilidad del sistema. En el caso anterior, los Browsers ya nada pueden hacer para detener un ataque de esa magnitud.

En el Top Ten \cite{owaspTopTen} de la OWASP (Open Web Application Security Project) - los diez riesgos de seguridad más importantes en Aplicaciones Web - se puede distinguir en el año 2013 los riesgos directamente relacionados a amenazas de seguridad en el Browser. Algunos como: Injección (A1), Manejo de sesiones y autenticación roto (A2), XSS (A3), CSRF (A8) y uso de componentes con vulnerabilidades conocidas (A9), son los riesgos que las organizaciones podrían sufrir en sus sistemas cuando se realizan ciertos ataques en el Browser.

En trabajos \cite{barth2008security, FirefoxThreatModel} se puede apreciar los Threat Model para los Navegadores Chromium y Firefox respectivamente. Es posible observar que existen ataques que pueden generar secuelas en otros sistemas, si es que el Navegador es afectado en primera instancia. Algunas amenazas existentes relacionadas con los riesgos mencionados en el párrafo anterior son:

\begin{enumerate}
	\item Compromiso de los componentes del Navegador (plugins incluídos) que poseen privilegios de usuario.
	\item Compromiso del Host/Sistema.
	\item Robo de datos en una red.
	\item Compromiso de páginas web (y su data) de origenes distintos.
	\item Fijación de sesión o robo de ésta
	\item Compromiso de los canales de comunicación del Browser.
\end{enumerate}

Una lista (parcial) de ataques asociados a las amenazas anteriores son:

\subsection{Phishing}
En el estudio realizado por NSS Labs \cite{browSecPhish}, muchos de los ataques que actualmente están ocurriendo en la actualidad se ha limitado al uso de técnicas de ingeniería social. Si bien los ataques basados en drive-by downloads y clickjacking siguen siendo de alto impacto, los atacantes parecen preferir los otros por la simplicidad de éste, pues no es necesario conocer realmente vulnerabilidades del Browser para llevarlos a cabo. 
	\subsubsection{Instalación de Malware o Extensiones malignas}
	Un ataque de este tipo puede ser originado desde la ejecución de un ataque Phishing a una persona; en especial cuando se hace creer que lo que se va a instalar, es completamente inofensivo.

\subsection{XSS - Cross-Site Scripting DOM}


\subsection{Man in the Browser (MITB)}



\section{Mecanismos de Defensa que se espera que el Host del Browser tenga previamente}
	Antes de revisar los mecanismo que un Navegador nos ofrece, es importante 


\section{Mecanismos de Defensa del Browser, para los ataques revisados}

\subsection{Sandboxing de procesos/componentes}
    \label{chap3:Sandboxing}
    La idea es encapsular el área de mayor probabilidad de ataque en un espacio aislado, minimizando la superficie de ataque de un software. Sandboxing no es una técnica tan nueva, han existido sistemas que ya lo han incorporado. Ésta protección puede ser aplicada dependiendo del diseño del software, algunos ocupan Sandbox a nivel del sistema operativo como otros que ocupan al nivel del \textit{engine} de Javascript. En el caso especial del Browser, esta técnica es construida en el nivel más alto posible para un programa de usuario, lo que permite la separación de privilegios entregados por el sistema operativo al browser y los subprocesos que corren dentro de éste. El atacante que se enfrente a un browser que tenga este mecanismo de defensa, tendrá que realizar primero un \textit{bypass} encontrando una vulnerabilidad en el sandboxing del browser. Existen diferentes técnicas para Sandboxing, todo depende del diseño del Browser.

    %Hablar del sandbox de IE y Chrome, Firefox no tiene

 \subsection{Aislación del contenido web de los componentes del Browser}

 \subsection{Blacklist y Whitelist de sitios web}

 \subsection{Detección de Malware por medio de sistemas de Reputación}

